(this["webpackJsonpreact-my-future"]=this["webpackJsonpreact-my-future"]||[]).push([[0],{109:function(e,t,n){e.exports={content:"Login_content__1pGqr",dialogs:"Login_dialogs__1qUnD",dialog:"Login_dialog__15lFT",messages:"Login_messages__PwMcu",text:"Login_text__354BZ"}},111:function(e,t,n){e.exports={post:"Post_post__3U-Nn"}},112:function(e,t,n){},113:function(e,t,n){e.exports={content:"Profile_content__3slbj"}},119:function(e,t,n){},19:function(e,t,n){e.exports={nav:"Navbar_nav__27g49",item:"Navbar_item__2j732",active:"Navbar_active__beY7M"}},241:function(e,t,n){},243:function(e,t,n){"use strict";n.r(t);var r=n(0),s=n.n(r),a=n(53),o=n.n(a),i=(n(119),n(4)),c=n(57),u=n(40),l=n.n(u),d=n(1),j=["input","meta","child"],b=["input","meta","child"],p=["input","meta","child"],f=function(e){e.input;var t=e.meta,n=(e.child,Object(c.a)(e,j)),r=t.touched&&t.error;return Object(d.jsxs)("div",{className:l.a.formControll+"  "+(r?l.a.error:""),children:[n.children,r&&Object(d.jsx)("p",{children:t.error})]})},h=function(e){var t=e.input,n=(e.meta,e.child,Object(c.a)(e,b));return Object(d.jsxs)(f,Object(i.a)(Object(i.a)({},e),{},{children:[" ",Object(d.jsx)("textarea",Object(i.a)(Object(i.a)({},t),n))," "]}))},O=function(e){var t=e.input,n=(e.meta,e.child,Object(c.a)(e,p));return Object(d.jsxs)(f,Object(i.a)(Object(i.a)({},e),{},{children:[" ",Object(d.jsx)("input",Object(i.a)(Object(i.a)({},t),n))]}))},g=function(e){return e?void 0:"This Field is Required"},m=function(e){return function(t){return t&&t.length>e?"Must be ".concat(e," characters or less"):void 0}},x=n(10),v=n(245),_=n(244),P=n(108).create({baseURL:"https://social-network.samuraijs.com/api/1.0/",withCredentials:!0,headers:{"API-KEY":"546a49ed-2d23-4b98-acb4-6997b0044e93"}}),S=function(e,t){return P.get("users?page="+e+"&count="+t).then((function(e){return e.data}))},y=function(e){return P.post("follow/"+e)},C=function(e){return P.delete("follow/"+e)},w=function(e){return P.get("profile/"+e)},N=function(){return P.get("auth/me").then((function(e){return e}))},U=function(e){return P.get("/profile/status/"+e).then((function(e){return e}))},T=function(e){return P.put("profile/status",{status:e}).then((function(e){return e}))},M=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return P.post("auth/login",{email:e,password:t,rememberMe:n})},I=function(){return P.delete("auth/login")},k="SET_CURRENT_USER",E={userId:null,email:null,login:null,isAuth:!1},D=function(e,t,n,r){return{type:k,payload:{userId:e,email:n,login:t,isAuth:r}}},L=function(){return function(e){N().then((function(t){if(0===t.data.resultCode){var n=t.data.data,r=n.id,s=n.login,a=n.email;e(D(r,s,a,!0))}}))}},A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case k:return Object(i.a)(Object(i.a)({},e),t.payload);default:return e}},R=n(109),F=n.n(R),B=Object(_.a)({form:"login"})((function(e){return Object(d.jsxs)("form",{onSubmit:e.handleSubmit,children:[Object(d.jsx)("div",{children:Object(d.jsx)(v.a,{component:O,type:"text",name:"email",placeholder:"login",validate:[g]})}),Object(d.jsx)("div",{children:Object(d.jsx)(v.a,{component:O,type:"password",name:"password",placeholder:"password",validate:[g]})}),Object(d.jsx)("div",{children:Object(d.jsx)(v.a,{component:O,type:"checkbox",name:"rememberMe"})}),Object(d.jsx)("div",{className:l.a.formSummaryError,children:Object(d.jsx)("p",{children:"Error"})}),Object(d.jsx)("button",{children:"Login"})]})})),G=Object(x.b)(null,{login:function(e,t,n,r){return function(r){M(e,t,n).then((function(e){0===e.data.resultCode&&r(L())}))}},logOut:function(){return function(e){I().then((function(t){0===t.data.resultCode&&e(D(null,null,null,!1))}))}}})((function(e){return Object(d.jsxs)("div",{className:F.a.content,children:[Object(d.jsx)("h1",{children:"Login"}),Object(d.jsx)(B,{onSubmit:function(t){e.login(t.email,t.password,t.rememberMe)}}),Object(d.jsx)("button",{onClick:function(){e.logOut()},children:"logout"})]})})),z=n(11),H=n(9),q=(n(241),n(22)),Z=n(23),J=n(25),K=n(24),W=function(e){return{isAuth:e.authData.loged}},Y=n(8),Q=n(30),V="ADD_MESSAGE",X={dialogs:[{id:1,name:"Dimych"},{id:2,name:"Artur"},{id:3,name:"Ira"},{id:4,name:"Zohan"},{id:5,name:"Kolya"},{id:6,name:"Tima"},{id:7,name:"Sasha"},{id:8,name:"Ara"}],chat:[{id:1,text:"Hi"},{id:2,text:"HAllo"},{id:3,text:"My Name it is Jony"},{id:4,text:"How are you"},{id:5,text:"Hi"},{id:6,text:"Yo"}],newMessage:""},$=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case V:return Object(i.a)(Object(i.a)({},e),{},{chat:[].concat(Object(Q.a)(e.chat),[{id:6,text:t.message}])});default:return e}},ee=n(26),te=n.n(ee),ne=function(e){return Object(d.jsx)("div",{className:te.a.message,children:e.text})},re=function(e){var t="/dialog/"+e.id;return Object(d.jsx)("div",{className:te.a.dialog,children:Object(d.jsx)(z.b,{to:t,children:e.name})})},se=m(35),ae=Object(_.a)({form:"message"})((function(e){return Object(d.jsxs)("form",{onSubmit:e.handleSubmit,children:[Object(d.jsx)("div",{children:Object(d.jsx)(v.a,{component:h,type:"text",name:"messageBody",placeholder:"Message...",validate:[g,se]})}),Object(d.jsx)("div",{children:Object(d.jsx)("button",{children:"SEND"})})]})})),oe=function(e){var t=e.PageMessage,n=t.dialogs.map((function(e){return Object(d.jsx)(re,{name:e.name,id:e.id})})),r=t.chat.map((function(e){return Object(d.jsx)(ne,{text:e.text,id:e.id})}));return Object(d.jsxs)("div",{className:te.a.content,children:[Object(d.jsx)("div",{className:te.a.dialogs,children:n}),Object(d.jsx)("div",{className:te.a.messages,children:r}),Object(d.jsx)("div",{className:te.a.text,children:Object(d.jsx)(ae,{onSubmit:function(t){e.SendMessage(t.messageBody)}})})]})},ie=Object(Y.d)(Object(x.b)((function(e){return{PageMessage:e.PageMessage,isAuth:e.authData.loged}}),{SendMessage:function(e){return{type:V,message:e}}}),(function(e){var t=function(t){Object(J.a)(r,t);var n=Object(K.a)(r);function r(){return Object(q.a)(this,r),n.apply(this,arguments)}return Object(Z.a)(r,[{key:"render",value:function(){return this.props.isAuth?Object(d.jsx)(e,Object(i.a)({},this.props)):Object(d.jsx)(H.a,{to:"/login"})}}]),r}(s.a.Component);return Object(x.b)(W)(t)}))(oe),ce="ADD_POST",ue="SET_PROFILE",le="SET_PRELOADER",de="GET_STATUS",je={posts:[{id:1,message:"Hi it is my first post"},{id:2,message:"i am study React"},{id:3,message:"Now i am use 'props'"}],newPostText:"",profile:null,isPreloader:!1,status:""},be=function(e){return{type:de,status:e}},pe=function(e){return{type:le,status:e}},fe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:je,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ce:return Object(i.a)(Object(i.a)({},e),{},{posts:[].concat(Object(Q.a)(e.posts),[{id:6,message:t.newPostBody}]),newPostText:""});case ue:return Object(i.a)(Object(i.a)({},e),{},{profile:t.profile});case le:return Object(i.a)(Object(i.a)({},e),{},{isPreloader:t.status});case de:return Object(i.a)(Object(i.a)({},e),{},{status:t.status});default:return e}},he=n(111),Oe=n.n(he),ge=function(e){return Object(d.jsxs)("div",{className:Oe.a.post,children:[Object(d.jsx)("img",{alt:"avatar",src:e.profileImage}),Object(d.jsxs)("div",{children:[" ",e.message," "]})]})},me=n(112),xe=n.n(me),ve=function(e){var t=e.posts.map((function(t){return Object(d.jsx)(ge,{message:t.message,profileImage:e.profileImage},t.id)}));return Object(d.jsx)("div",{className:xe.a.posts,children:t})},_e=n(113),Pe=n.n(_e),Se=function(e){Object(J.a)(n,e);var t=Object(K.a)(n);function n(){var e;Object(q.a)(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).state={editMode:!1,status:e.props.status},e.activateEditMode=function(t){e.setState({editMode:t}),t||e.props.updateStatus(e.state.status)},e.onStatusChange=function(t){e.setState({status:t.currentTarget.value})},e}return Object(Z.a)(n,[{key:"componentDidUpdate",value:function(e,t){e.status!==this.props.status&&this.setState({status:this.props.status})}},{key:"render",value:function(){var e=this;return Object(d.jsx)("div",{children:this.state.editMode?Object(d.jsx)("div",{children:Object(d.jsx)("input",{onChange:this.onStatusChange,autoFocus:!0,value:this.state.status,onBlur:function(){e.activateEditMode(!1)}})}):Object(d.jsx)("div",{children:Object(d.jsx)("span",{onDoubleClick:function(){e.activateEditMode(!0)},children:Object(d.jsx)("p",{children:this.props.status})})})})}}]),n}(s.a.Component),ye=n.p+"static/media/preloader.a1937be4.gif",Ce=function(e){return Object(d.jsx)("div",{children:Object(d.jsx)("img",{src:ye,alt:"Preloader"})})},we=n.p+"static/media/avatar.e39390c3.jpg",Ne=m(10),Ue=Object(_.a)({form:"posts"})((function(e){return Object(d.jsxs)("form",{onSubmit:e.handleSubmit,children:[Object(d.jsx)("div",{children:Object(d.jsx)(v.a,{component:h,type:"text",name:"newPostBody",placeholder:"Message...",validate:[g,Ne]})}),Object(d.jsx)("div",{children:Object(d.jsx)("button",{children:"SEND"})})]})})),Te=function(e){if(!e.profile)return Object(d.jsx)(Ce,{});return Object(d.jsxs)("div",{className:Pe.a.content,children:[Object(d.jsx)("img",{alt:"avatar",src:e.profile.photos.large?e.profile.photos.large:we}),Object(d.jsx)(Se,{status:e.status,updateStatus:e.setStatusCarrentUser}),Object(d.jsx)(Ue,{onSubmit:function(t){e.addNewPost(t.newPostBody)}}),Object(d.jsx)(ve,{posts:e.posts,profileImage:e.profile.photos.large?e.profile.photos.large:we})]})},Me=function(e){Object(J.a)(n,e);var t=Object(K.a)(n);function n(){return Object(q.a)(this,n),t.apply(this,arguments)}return Object(Z.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.match.params.userID;e||(e=17696),this.props.setCurrentUserPage(e),this.props.getUserStatus(e)}},{key:"render",value:function(){return Object(d.jsx)(Te,Object(i.a)({},this.props))}}]),n}(s.a.Component),Ie=Object(Y.d)(Object(x.b)((function(e){return{profile:e.PageProfile.profile,isAuth:e.authData.loged,posts:e.PageProfile.posts,newPostText:e.PageProfile.newPostText,status:e.PageProfile.status}}),{addNewPost:function(e){return{type:ce,newPostBody:e}},setCurrentUserPage:function(e){return function(t){t(pe(!0)),w(e).then((function(e){var n;t((n=e.data,{type:ue,profile:n})),t(pe(!1))}))}},getUserStatus:function(e){return function(t){U(e).then((function(e){t(be(e.data))}))}},setStatusCarrentUser:function(e){return function(t){T(e).then((function(n){0===n.data.resultCode&&t(be(e))}))}}}),H.f)(Me),ke="FOLLOW",Ee="UNFOLLOW",De="SET_USERS",Le="SET_CURRENT_PAGE",Ae="SET_TOTAL_USERS_COUNT",Re="TOOGGLE_IS_FEATCHING",Fe="FOLLOWING_IN_PROGRESS",Be={users:[],totalUsersCount:0,pageSize:5,currentPage:1,isPreloader:!1,followingInprogress:[]},Ge=function(e){return{type:De,usersList:e}},ze=function(e){return{type:Ae,totalCount:e}},He=function(e){return{type:Re,isPrloader:e}},qe=function(e,t){return{type:Fe,followingProgress:e,userID:t}},Ze=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Be,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ke:return Object(i.a)(Object(i.a)({},e),{},{users:e.users.map((function(e){return e.id===t.userID?Object(i.a)(Object(i.a)({},e),{},{followed:!0}):e}))});case Ee:return Object(i.a)(Object(i.a)({},e),{},{users:e.users.map((function(e){return e.id===t.userID?Object(i.a)(Object(i.a)({},e),{},{followed:!1}):e}))});case De:return Object(i.a)(Object(i.a)({},e),{},{users:Object(Q.a)(t.usersList)});case Le:return Object(i.a)(Object(i.a)({},e),{},{currentPage:t.currentPage});case Ae:return Object(i.a)(Object(i.a)({},e),{},{totalUsersCount:t.totalCount});case Re:return Object(i.a)(Object(i.a)({},e),{},{isPreloader:t.isPrloader});case Fe:return Object(i.a)(Object(i.a)({},e),{},{followingInprogress:t.followingProgress?[].concat(Object(Q.a)(e.followingInprogress),[t.userID]):Object(Q.a)(e.followingInprogress.filter((function(e){return e!==t.userID})))});default:return e}},Je=n(56),Ke=n.n(Je),We=function(e){for(var t=Math.ceil(e.totalUsersCount/e.pageSize),n=[],r=1;r<=t;r++)n.push(r);return Object(d.jsxs)("div",{className:Ke.a.content,children:[e.isPreloader?Object(d.jsx)(Ce,{}):null,Object(d.jsx)("div",{className:Ke.a.paginator,children:n.map((function(t){return Object(d.jsx)("span",{onClick:function(n){e.onPageChanged(t)},children:t},t)}))}),e.users.map((function(t){return Object(d.jsxs)("div",{className:Ke.a.user,children:[Object(d.jsxs)("span",{children:[Object(d.jsx)("p",{children:t.name}),Object(d.jsx)(z.b,{to:"/profile/"+t.id,children:Object(d.jsx)("img",{alt:"avatar",src:null!=t.photos.small?t.photos.small:we})})]}),Object(d.jsxs)("span",{children:[Object(d.jsx)("p",{children:t.status}),t.followed?Object(d.jsx)("button",{disabled:e.followingInProgress.some((function(e){return e===t.id})),onClick:function(){e.unfollowThunk(t.id)},children:"Unfollow"}):Object(d.jsx)("button",{disabled:e.followingInProgress.some((function(e){return e===t.id})),onClick:function(){e.followThunk(t.id)},children:"Follow"})]})]},t.id)}))]})},Ye=function(e){Object(J.a)(n,e);var t=Object(K.a)(n);function n(){var e;Object(q.a)(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).onPageChanged=function(t){e.props.getUsersThunkCreator(t,e.props.pageSize)},e}return Object(Z.a)(n,[{key:"componentDidMount",value:function(){this.props.getUsersThunkCreator(this.props.currentPage,this.props.pageSize)}},{key:"render",value:function(){return Object(d.jsx)(We,{onPageChanged:this.onPageChanged,totalUsersCount:this.props.totalUsersCount,pageSize:this.props.pageSize,currentPage:this.props.currentPage,users:this.props.users,isPreloader:this.props.isPreloader,followingInProgress:this.props.followingInProgress,unfollowThunk:this.props.unfollowThunk,followThunk:this.props.followThunk})}}]),n}(s.a.Component),Qe={setUsers:Ge,setCurrentPage:function(e){return{type:Le,currentPage:e}},setTotalCount:ze,getUsersThunkCreator:function(e,t){return function(n){n(He(!0)),S(e,t).then((function(e){n(Ge(e.items)),n(ze(e.totalCount)),n(He(!1))}))}},followThunk:function(e){return function(t){t(qe(!0,e)),y(e).then((function(n){0===n.data.resultCode&&t({type:ke,userID:e}),t(qe(!1,e))}))}},unfollowThunk:function(e){return function(t){t(qe(!0,e)),C(e).then((function(n){0===n.data.resultCode&&t({type:Ee,userID:e}),t(qe(!1,e))}))}}},Ve=Object(Y.d)(Object(x.b)((function(e){return{users:e.PageUsers.users,pageSize:e.PageUsers.pageSize,totalUsersCount:e.PageUsers.totalUsersCount,currentPage:e.PageUsers.currentPage,isPreloader:e.PageUsers.isPreloader,followingInProgress:e.PageUsers.followingInprogress}}),Qe))(Ye),Xe=n(78),$e=n.n(Xe),et=function(e){return Object(d.jsx)("header",{className:$e.a.header,children:e.profile.login?Object(d.jsx)(z.b,{to:"/profile",children:e.profile.login}):Object(d.jsx)(z.b,{to:"/login",activeClassName:$e.a.active,children:"Login"})})},tt=function(e){Object(J.a)(n,e);var t=Object(K.a)(n);function n(){return Object(q.a)(this,n),t.apply(this,arguments)}return Object(Z.a)(n,[{key:"componentDidMount",value:function(){this.props.setCurrentUser()}},{key:"render",value:function(){return Object(d.jsx)(et,{profile:this.props})}}]),n}(s.a.Component),nt=Object(x.b)((function(e){return{login:e.authData.login}}),{setCurrentUser:L})(tt),rt=n(19),st=n.n(rt),at=function(){return Object(d.jsxs)("nav",{className:st.a.nav,children:[Object(d.jsx)("div",{className:st.a.item,children:Object(d.jsx)(z.b,{to:"/profile",activeClassName:st.a.active,children:"Profile"})}),Object(d.jsx)("div",{className:st.a.item,children:Object(d.jsx)(z.b,{to:"/dialogs",activeClassName:st.a.active,children:"Messeges"})}),Object(d.jsx)("div",{className:st.a.item,children:Object(d.jsx)(z.b,{to:"/users",activeClassName:st.a.active,children:"Users"})}),Object(d.jsx)("div",{className:st.a.item,children:Object(d.jsx)(z.b,{to:"/setting",children:"Setting"})}),Object(d.jsx)("div",{className:st.a.item,children:Object(d.jsx)(z.b,{to:"/login",activeClassName:st.a.active,children:"Login"})})]})},ot=function(){return Object(d.jsx)(z.a,{children:Object(d.jsxs)("div",{className:"app-wrapper",children:[Object(d.jsx)(nt,{}),Object(d.jsx)(at,{}),Object(d.jsx)(H.b,{path:"/profile/:userID?",render:function(){return Object(d.jsx)(Ie,{})}}),Object(d.jsx)(H.b,{path:"/dialogs",render:function(){return Object(d.jsx)(ie,{})}}),Object(d.jsx)(H.b,{path:"/users",render:function(){return Object(d.jsx)(Ve,{})}}),Object(d.jsx)(H.b,{path:"/login",render:function(){return Object(d.jsx)(G,{})}})]})})},it=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,247)).then((function(t){var n=t.getCLS,r=t.getFID,s=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),r(e),s(e),a(e),o(e)}))},ct=n(114),ut=n(246),lt=Object(Y.c)({PageMessage:$,PageProfile:fe,PageUsers:Ze,authData:A,form:ut.a}),dt=Object(Y.e)(lt,Object(Y.a)(ct.a));window.store=dt;var jt=dt;o.a.render(Object(d.jsx)(s.a.StrictMode,{children:Object(d.jsx)(x.a,{store:jt,children:Object(d.jsx)(ot,{})})}),document.getElementById("root")),it()},26:function(e,t,n){e.exports={content:"Message_content__2Ta--",dialogs:"Message_dialogs__18PBc",dialog:"Message_dialog__2NMGB",messages:"Message_messages___Dfak",text:"Message_text__2droS"}},40:function(e,t,n){e.exports={formControll:"FormStyle_formControll__aRQI7",error:"FormStyle_error__zq57a",formSummaryError:"FormStyle_formSummaryError__2MmSl"}},56:function(e,t,n){e.exports={content:"Users_content__3tgL-",user:"Users_user__kKqnR",selected:"Users_selected__31BCR",paginator:"Users_paginator__1cf3m"}},78:function(e,t,n){e.exports={header:"Header_header__2ZT_5",login:"Header_login__-Zkbd"}}},[[243,1,2]]]);
//# sourceMappingURL=main.02cba2e8.chunk.js.map